const t=[];for(let i=0;i<256;i++)t[i]=(i<16?"0":"")+i.toString(16);let i=1234567;const s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const i=4294967295*Math.random()|0,s=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&s]+t[s>>8&255]+"-"+t[s>>16&15|64]+t[s>>24&255]+"-"+t[63&e|128]+t[e>>8&255]+"-"+t[e>>16&255]+t[e>>24&255]+t[255&n]+t[n>>8&255]+t[n>>16&255]+t[n>>24&255]).toUpperCase()},clamp:function(t,i,s){return Math.max(i,Math.min(s,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,s,e,n){return e+(t-i)*(n-e)/(s-i)},lerp:function(t,i,s){return(1-s)*t+s*i},smoothstep:function(t,i,s){return t<=i?0:t>=s?1:(t=(t-i)/(s-i))*t*(3-2*t)},smootherstep:function(t,i,s){return t<=i?0:t>=s?1:(t=(t-i)/(s-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(i=t%2147483647),((i=16807*i%2147483647)-1)/2147483646},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,s,e,n){const r=Math.cos,o=Math.sin,h=r(s/2),a=o(s/2),u=r((i+e)/2),c=o((i+e)/2),l=r((i-e)/2),m=o((i-e)/2),f=r((e-i)/2),d=o((e-i)/2);switch(n){case"XYX":t.set(h*c,a*l,a*m,h*u);break;case"YZY":t.set(a*m,h*c,a*l,h*u);break;case"ZXZ":t.set(a*l,a*m,h*c,h*u);break;case"XZX":t.set(h*c,a*d,a*f,h*u);break;case"YXY":t.set(a*f,h*c,a*d,h*u);break;case"ZYZ":t.set(a*d,a*f,h*c,h*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}};function e(t=0,i=0,s=0,e=1){this._x=t,this._y=i,this._z=s,this._w=e}Object.assign(e,{slerp:function(t,i,s,e){return s.copy(t).slerp(i,e)},slerpFlat:function(t,i,s,e,n,r,o){let h=s[e+0],a=s[e+1],u=s[e+2],c=s[e+3];const l=n[r+0],m=n[r+1],f=n[r+2],d=n[r+3];if(c!==d||h!==l||a!==m||u!==f){let t=1-o,i=h*l+a*m+u*f+c*d,s=i>=0?1:-1,e=1-i*i;if(e>Number.EPSILON){const n=Math.sqrt(e),r=Math.atan2(n,i*s);t=Math.sin(t*r)/n,o=Math.sin(o*r)/n}const n=o*s;if(h=h*t+l*n,a=a*t+m*n,u=u*t+f*n,c=c*t+d*n,t===1-o){const t=1/Math.sqrt(h*h+a*a+u*u+c*c);h*=t,a*=t,u*=t,c*=t}}t[i]=h,t[i+1]=a,t[i+2]=u,t[i+3]=c},multiplyQuaternionsFlat:function(t,i,s,e,n,r){const o=s[e],h=s[e+1],a=s[e+2],u=s[e+3],c=n[r],l=n[r+1],m=n[r+2],f=n[r+3];return t[i]=o*f+u*c+h*m-a*l,t[i+1]=h*f+u*l+a*c-o*m,t[i+2]=a*f+u*m+o*l-h*c,t[i+3]=u*f-o*c-h*l-a*m,t}}),Object.defineProperties(e.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(e.prototype,{isQuaternion:!0,set:function(t,i,s,e){return this._x=t,this._y=i,this._z=s,this._w=e,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const s=t._x,e=t._y,n=t._z,r=t.order,o=Math.cos,h=Math.sin,a=o(s/2),u=o(e/2),c=o(n/2),l=h(s/2),m=h(e/2),f=h(n/2);switch(r){case"XYZ":this._x=l*u*c+a*m*f,this._y=a*m*c-l*u*f,this._z=a*u*f+l*m*c,this._w=a*u*c-l*m*f;break;case"YXZ":this._x=l*u*c+a*m*f,this._y=a*m*c-l*u*f,this._z=a*u*f-l*m*c,this._w=a*u*c+l*m*f;break;case"ZXY":this._x=l*u*c-a*m*f,this._y=a*m*c+l*u*f,this._z=a*u*f+l*m*c,this._w=a*u*c-l*m*f;break;case"ZYX":this._x=l*u*c-a*m*f,this._y=a*m*c+l*u*f,this._z=a*u*f-l*m*c,this._w=a*u*c+l*m*f;break;case"YZX":this._x=l*u*c+a*m*f,this._y=a*m*c+l*u*f,this._z=a*u*f-l*m*c,this._w=a*u*c-l*m*f;break;case"XZY":this._x=l*u*c-a*m*f,this._y=a*m*c-l*u*f,this._z=a*u*f+l*m*c,this._w=a*u*c+l*m*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!1!==i&&this._onChangeCallback(),this},setFromAxisAngle:function(t,i){const s=i/2,e=Math.sin(s);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(s),this._onChangeCallback(),this},setFromRotationMatrix:function(t){const i=t.elements,s=i[0],e=i[4],n=i[8],r=i[1],o=i[5],h=i[9],a=i[2],u=i[6],c=i[10],l=s+o+c;if(l>0){const t=.5/Math.sqrt(l+1);this._w=.25/t,this._x=(u-h)*t,this._y=(n-a)*t,this._z=(r-e)*t}else if(s>o&&s>c){const t=2*Math.sqrt(1+s-o-c);this._w=(u-h)/t,this._x=.25*t,this._y=(e+r)/t,this._z=(n+a)/t}else if(o>c){const t=2*Math.sqrt(1+o-s-c);this._w=(n-a)/t,this._x=(e+r)/t,this._y=.25*t,this._z=(h+u)/t}else{const t=2*Math.sqrt(1+c-s-o);this._w=(r-e)/t,this._x=(n+a)/t,this._y=(h+u)/t,this._z=.25*t}return this._onChangeCallback(),this},setFromUnitVectors:function(t,i){let s=t.dot(i)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(s.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,i){const s=this.angleTo(t);if(0===s)return this;const e=Math.min(1,i/s);return this.slerp(t,e),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){const s=t._x,e=t._y,n=t._z,r=t._w,o=i._x,h=i._y,a=i._z,u=i._w;return this._x=s*u+r*o+e*a-n*h,this._y=e*u+r*h+n*o-s*a,this._z=n*u+r*a+s*h-e*o,this._w=r*u-s*o-e*h-n*a,this._onChangeCallback(),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);const s=this._x,e=this._y,n=this._z,r=this._w;let o=r*t._w+s*t._x+e*t._y+n*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=r,this._x=s,this._y=e,this._z=n,this;const h=1-o*o;if(h<=Number.EPSILON){const t=1-i;return this._w=t*r+i*this._w,this._x=t*s+i*this._x,this._y=t*e+i*this._y,this._z=t*n+i*this._z,this.normalize(),this._onChangeCallback(),this}const a=Math.sqrt(h),u=Math.atan2(a,o),c=Math.sin((1-i)*u)/a,l=Math.sin(i*u)/a;return this._w=r*c+this._w*l,this._x=s*c+this._x*l,this._y=e*c+this._y*l,this._z=n*c+this._z*l,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},fromBufferAttribute:function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});const n=new o,r=new e;function o(t=0,i=0,s=0){this.x=t,this.y=i,this.z=s}Object.assign(o.prototype,{isVector3:!0,set:function(t,i,s){return void 0===s&&(s=this.z),this.x=t,this.y=i,this.z=s,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(r.setFromEuler(t))},applyAxisAngle:function(t,i){return this.applyQuaternion(r.setFromAxisAngle(t,i))},applyMatrix3:function(t){const i=this.x,s=this.y,e=this.z,n=t.elements;return this.x=n[0]*i+n[3]*s+n[6]*e,this.y=n[1]*i+n[4]*s+n[7]*e,this.z=n[2]*i+n[5]*s+n[8]*e,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){const i=this.x,s=this.y,e=this.z,n=t.elements,r=1/(n[3]*i+n[7]*s+n[11]*e+n[15]);return this.x=(n[0]*i+n[4]*s+n[8]*e+n[12])*r,this.y=(n[1]*i+n[5]*s+n[9]*e+n[13])*r,this.z=(n[2]*i+n[6]*s+n[10]*e+n[14])*r,this},applyQuaternion:function(t){const i=this.x,s=this.y,e=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*e-o*s,u=h*s+o*i-n*e,c=h*e+n*s-r*i,l=-n*i-r*s-o*e;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){const i=this.x,s=this.y,e=this.z,n=t.elements;return this.x=n[0]*i+n[4]*s+n[8]*e,this.y=n[1]*i+n[5]*s+n[9]*e,this.z=n[2]*i+n[6]*s+n[10]*e,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this},clampLength:function(t,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},lerpVectors:function(t,i,s){return this.x=t.x+(i.x-t.x)*s,this.y=t.y+(i.y-t.y)*s,this.z=t.z+(i.z-t.z)*s,this},cross:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)},crossVectors:function(t,i){const s=t.x,e=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=e*h-n*o,this.y=n*r-s*h,this.z=s*o-e*r,this},projectOnVector:function(t){const i=t.lengthSq();if(0===i)return this.set(0,0,0);const s=t.dot(this)/i;return this.copy(t).multiplyScalar(s)},projectOnPlane:function(t){return n.copy(this).projectOnVector(t),this.sub(n)},reflect:function(t){return this.sub(n.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;const e=this.dot(t)/i;return Math.acos(s.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){const i=this.x-t.x,s=this.y-t.y,e=this.z-t.z;return i*i+s*s+e*e},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,i,s){const e=Math.sin(i)*t;return this.x=e*Math.sin(s),this.y=Math.cos(i)*t,this.z=e*Math.cos(s),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,i,s){return this.x=t*Math.sin(i),this.y=s,this.z=t*Math.cos(i),this},setFromMatrixPosition:function(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this},setFromMatrixScale:function(t){const i=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),e=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=s,this.z=e,this},setFromMatrixColumn:function(t,i){return this.fromArray(t.elements,4*i)},setFromMatrix3Column:function(t,i){return this.fromArray(t.elements,3*i)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},fromBufferAttribute:function(t,i,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});const h=new o,a=new d,u=new o(0,0,0),c=new o(1,1,1),l=new o,m=new o,f=new o;function d(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function x(){}Object.assign(d.prototype,{isMatrix4:!0,set:function(t,i,s,e,n,r,o,h,a,u,c,l,m,f,d,x){const y=this.elements;return y[0]=t,y[4]=i,y[8]=s,y[12]=e,y[1]=n,y[5]=r,y[9]=o,y[13]=h,y[2]=a,y[6]=u,y[10]=c,y[14]=l,y[3]=m,y[7]=f,y[11]=d,y[15]=x,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new d).fromArray(this.elements)},copy:function(t){const i=this.elements,s=t.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],this},copyPosition:function(t){const i=this.elements,s=t.elements;return i[12]=s[12],i[13]=s[13],i[14]=s[14],this},extractBasis:function(t,i,s){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this},makeBasis:function(t,i,s){return this.set(t.x,i.x,s.x,0,t.y,i.y,s.y,0,t.z,i.z,s.z,0,0,0,0,1),this},extractRotation:function(t){const i=this.elements,s=t.elements,e=1/h.setFromMatrixColumn(t,0).length(),n=1/h.setFromMatrixColumn(t,1).length(),r=1/h.setFromMatrixColumn(t,2).length();return i[0]=s[0]*e,i[1]=s[1]*e,i[2]=s[2]*e,i[3]=0,i[4]=s[4]*n,i[5]=s[5]*n,i[6]=s[6]*n,i[7]=0,i[8]=s[8]*r,i[9]=s[9]*r,i[10]=s[10]*r,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const i=this.elements,s=t.x,e=t.y,n=t.z,r=Math.cos(s),o=Math.sin(s),h=Math.cos(e),a=Math.sin(e),u=Math.cos(n),c=Math.sin(n);if("XYZ"===t.order){const t=r*u,s=r*c,e=o*u,n=o*c;i[0]=h*u,i[4]=-h*c,i[8]=a,i[1]=s+e*a,i[5]=t-n*a,i[9]=-o*h,i[2]=n-t*a,i[6]=e+s*a,i[10]=r*h}else if("YXZ"===t.order){const t=h*u,s=h*c,e=a*u,n=a*c;i[0]=t+n*o,i[4]=e*o-s,i[8]=r*a,i[1]=r*c,i[5]=r*u,i[9]=-o,i[2]=s*o-e,i[6]=n+t*o,i[10]=r*h}else if("ZXY"===t.order){const t=h*u,s=h*c,e=a*u,n=a*c;i[0]=t-n*o,i[4]=-r*c,i[8]=e+s*o,i[1]=s+e*o,i[5]=r*u,i[9]=n-t*o,i[2]=-r*a,i[6]=o,i[10]=r*h}else if("ZYX"===t.order){const t=r*u,s=r*c,e=o*u,n=o*c;i[0]=h*u,i[4]=e*a-s,i[8]=t*a+n,i[1]=h*c,i[5]=n*a+t,i[9]=s*a-e,i[2]=-a,i[6]=o*h,i[10]=r*h}else if("YZX"===t.order){const t=r*h,s=r*a,e=o*h,n=o*a;i[0]=h*u,i[4]=n-t*c,i[8]=e*c+s,i[1]=c,i[5]=r*u,i[9]=-o*u,i[2]=-a*u,i[6]=s*c+e,i[10]=t-n*c}else if("XZY"===t.order){const t=r*h,s=r*a,e=o*h,n=o*a;i[0]=h*u,i[4]=-c,i[8]=a*u,i[1]=t*c+n,i[5]=r*u,i[9]=s*c-e,i[2]=e*c-s,i[6]=o*u,i[10]=n*c+t}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(u,t,c)},lookAt:function(t,i,s){const e=this.elements;return f.subVectors(t,i),0===f.lengthSq()&&(f.z=1),f.normalize(),l.crossVectors(s,f),0===l.lengthSq()&&(1===Math.abs(s.z)?f.x+=1e-4:f.z+=1e-4,f.normalize(),l.crossVectors(s,f)),l.normalize(),m.crossVectors(f,l),e[0]=l.x,e[4]=m.x,e[8]=f.x,e[1]=l.y,e[5]=m.y,e[9]=f.y,e[2]=l.z,e[6]=m.z,e[10]=f.z,this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){const s=t.elements,e=i.elements,n=this.elements,r=s[0],o=s[4],h=s[8],a=s[12],u=s[1],c=s[5],l=s[9],m=s[13],f=s[2],d=s[6],x=s[10],y=s[14],_=s[3],p=s[7],M=s[11],z=s[15],g=e[0],w=e[4],b=e[8],v=e[12],C=e[1],E=e[5],k=e[9],O=e[13],A=e[2],F=e[6],S=e[10],R=e[14],W=e[3],j=e[7],q=e[11],T=e[15];return n[0]=r*g+o*C+h*A+a*W,n[4]=r*w+o*E+h*F+a*j,n[8]=r*b+o*k+h*S+a*q,n[12]=r*v+o*O+h*R+a*T,n[1]=u*g+c*C+l*A+m*W,n[5]=u*w+c*E+l*F+m*j,n[9]=u*b+c*k+l*S+m*q,n[13]=u*v+c*O+l*R+m*T,n[2]=f*g+d*C+x*A+y*W,n[6]=f*w+d*E+x*F+y*j,n[10]=f*b+d*k+x*S+y*q,n[14]=f*v+d*O+x*R+y*T,n[3]=_*g+p*C+M*A+z*W,n[7]=_*w+p*E+M*F+z*j,n[11]=_*b+p*k+M*S+z*q,n[15]=_*v+p*O+M*R+z*T,this},multiplyScalar:function(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},determinant:function(){const t=this.elements,i=t[0],s=t[4],e=t[8],n=t[12],r=t[1],o=t[5],h=t[9],a=t[13],u=t[2],c=t[6],l=t[10],m=t[14];return t[3]*(+n*h*c-e*a*c-n*o*l+s*a*l+e*o*m-s*h*m)+t[7]*(+i*h*m-i*a*l+n*r*l-e*r*m+e*a*u-n*h*u)+t[11]*(+i*a*c-i*o*m-n*r*c+s*r*m+n*o*u-s*a*u)+t[15]*(-e*o*u-i*h*c+i*o*l+e*r*c-s*r*l+s*h*u)},transpose:function(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this},setPosition:function(t,i,s){const e=this.elements;return t.isVector3?(e[12]=t.x,e[13]=t.y,e[14]=t.z):(e[12]=t,e[13]=i,e[14]=s),this},getInverse:function(t,i){void 0!==i&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const s=this.elements,e=t.elements,n=e[0],r=e[1],o=e[2],h=e[3],a=e[4],u=e[5],c=e[6],l=e[7],m=e[8],f=e[9],d=e[10],x=e[11],y=e[12],_=e[13],p=e[14],M=e[15],z=f*p*l-_*d*l+_*c*x-u*p*x-f*c*M+u*d*M,g=y*d*l-m*p*l-y*c*x+a*p*x+m*c*M-a*d*M,w=m*_*l-y*f*l+y*u*x-a*_*x-m*u*M+a*f*M,b=y*f*c-m*_*c-y*u*d+a*_*d+m*u*p-a*f*p,v=n*z+r*g+o*w+h*b;if(0===v)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/v;return s[0]=z*C,s[1]=(_*d*h-f*p*h-_*o*x+r*p*x+f*o*M-r*d*M)*C,s[2]=(u*p*h-_*c*h+_*o*l-r*p*l-u*o*M+r*c*M)*C,s[3]=(f*c*h-u*d*h-f*o*l+r*d*l+u*o*x-r*c*x)*C,s[4]=g*C,s[5]=(m*p*h-y*d*h+y*o*x-n*p*x-m*o*M+n*d*M)*C,s[6]=(y*c*h-a*p*h-y*o*l+n*p*l+a*o*M-n*c*M)*C,s[7]=(a*d*h-m*c*h+m*o*l-n*d*l-a*o*x+n*c*x)*C,s[8]=w*C,s[9]=(y*f*h-m*_*h-y*r*x+n*_*x+m*r*M-n*f*M)*C,s[10]=(a*_*h-y*u*h+y*r*l-n*_*l-a*r*M+n*u*M)*C,s[11]=(m*u*h-a*f*h-m*r*l+n*f*l+a*r*x-n*u*x)*C,s[12]=b*C,s[13]=(m*_*o-y*f*o+y*r*d-n*_*d-m*r*p+n*f*p)*C,s[14]=(y*u*o-a*_*o-y*r*c+n*_*c+a*r*p-n*u*p)*C,s[15]=(a*f*o-m*u*o+m*r*c-n*f*c-a*r*d+n*u*d)*C,this},scale:function(t){const i=this.elements,s=t.x,e=t.y,n=t.z;return i[0]*=s,i[4]*=e,i[8]*=n,i[1]*=s,i[5]*=e,i[9]*=n,i[2]*=s,i[6]*=e,i[10]*=n,i[3]*=s,i[7]*=e,i[11]*=n,this},getMaxScaleOnAxis:function(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],e=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,s,e))},makeTranslation:function(t,i,s){return this.set(1,0,0,t,0,1,0,i,0,0,1,s,0,0,0,1),this},makeRotationX:function(t){const i=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,i,-s,0,0,s,i,0,0,0,0,1),this},makeRotationY:function(t){const i=Math.cos(t),s=Math.sin(t);return this.set(i,0,s,0,0,1,0,0,-s,0,i,0,0,0,0,1),this},makeRotationZ:function(t){const i=Math.cos(t),s=Math.sin(t);return this.set(i,-s,0,0,s,i,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,i){const s=Math.cos(i),e=Math.sin(i),n=1-s,r=t.x,o=t.y,h=t.z,a=n*r,u=n*o;return this.set(a*r+s,a*o-e*h,a*h+e*o,0,a*o+e*h,u*o+s,u*h-e*r,0,a*h-e*o,u*h+e*r,n*h*h+s,0,0,0,0,1),this},makeScale:function(t,i,s){return this.set(t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1),this},makeShear:function(t,i,s){return this.set(1,i,s,0,t,1,s,0,t,i,1,0,0,0,0,1),this},compose:function(t,i,s){const e=this.elements,n=i._x,r=i._y,o=i._z,h=i._w,a=n+n,u=r+r,c=o+o,l=n*a,m=n*u,f=n*c,d=r*u,x=r*c,y=o*c,_=h*a,p=h*u,M=h*c,z=s.x,g=s.y,w=s.z;return e[0]=(1-(d+y))*z,e[1]=(m+M)*z,e[2]=(f-p)*z,e[3]=0,e[4]=(m-M)*g,e[5]=(1-(l+y))*g,e[6]=(x+_)*g,e[7]=0,e[8]=(f+p)*w,e[9]=(x-_)*w,e[10]=(1-(l+d))*w,e[11]=0,e[12]=t.x,e[13]=t.y,e[14]=t.z,e[15]=1,this},decompose:function(t,i,s){const e=this.elements;let n=h.set(e[0],e[1],e[2]).length(),r=h.set(e[4],e[5],e[6]).length(),o=h.set(e[8],e[9],e[10]).length();this.determinant()<0&&(n=-n),t.x=e[12],t.y=e[13],t.z=e[14],a.copy(this);const u=1/n,c=1/r,l=1/o;return a.elements[0]*=u,a.elements[1]*=u,a.elements[2]*=u,a.elements[4]*=c,a.elements[5]*=c,a.elements[6]*=c,a.elements[8]*=l,a.elements[9]*=l,a.elements[10]*=l,i.setFromRotationMatrix(a),s.x=n,s.y=r,s.z=o,this},makePerspective:function(t,i,s,e,n,r){void 0===r&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,h=2*n/(i-t),a=2*n/(s-e),u=(i+t)/(i-t),c=(s+e)/(s-e),l=-(r+n)/(r-n),m=-2*r*n/(r-n);return o[0]=h,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=a,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=m,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,i,s,e,n,r){const o=this.elements,h=1/(i-t),a=1/(s-e),u=1/(r-n),c=(i+t)*h,l=(s+e)*a,m=(r+n)*u;return o[0]=2*h,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*a,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-m,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){const i=this.elements,s=t.elements;for(let t=0;t<16;t++)if(i[t]!==s[t])return!1;return!0},fromArray:function(t,i){void 0===i&&(i=0);for(let s=0;s<16;s++)this.elements[s]=t[s+i];return this},toArray:function(t,i){void 0===t&&(t=[]),void 0===i&&(i=0);const s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t[i+9]=s[9],t[i+10]=s[10],t[i+11]=s[11],t[i+12]=s[12],t[i+13]=s[13],t[i+14]=s[14],t[i+15]=s[15],t}}),Object.assign(x.prototype,{addEventListener:function(t,i){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(i)&&s[t].push(i)},hasEventListener:function(t,i){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[t]&&-1!==s[t].indexOf(i)},removeEventListener:function(t,i){if(void 0===this._listeners)return;const s=this._listeners[t];if(void 0!==s){const t=s.indexOf(i);-1!==t&&s.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const s=i.slice(0);for(let i=0,e=s.length;i<e;i++)s[i].call(this,t)}}});const y=new d,_=new e;function p(t=0,i=0,s=0,e=p.DefaultOrder){this._x=t,this._y=i,this._z=s,this._order=e}function M(){this.mask=1}function z(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}p.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],p.DefaultOrder="XYZ",Object.defineProperties(p.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(p.prototype,{isEuler:!0,set:function(t,i,s,e){return this._x=t,this._y=i,this._z=s,this._order=e||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,i,e){const n=s.clamp,r=t.elements,o=r[0],h=r[4],a=r[8],u=r[1],c=r[5],l=r[9],m=r[2],f=r[6],d=r[10];switch(i=i||this._order){case"XYZ":this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-h,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-n(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-m,o),this._z=0);break;case"ZXY":this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-m,d),this._z=Math.atan2(-h,c)):(this._y=0,this._z=Math.atan2(u,o));break;case"ZYX":this._y=Math.asin(-n(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-h,c));break;case"YZX":this._z=Math.asin(n(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-m,o)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-n(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!1!==e&&this._onChangeCallback(),this},setFromQuaternion:function(t,i,s){return y.makeRotationFromQuaternion(t),this.setFromRotationMatrix(y,i,s)},setFromVector3:function(t,i){return this.set(t.x,t.y,t.z,i||this._order)},reorder:function(t){return _.setFromEuler(this),this.setFromQuaternion(_,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(M.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}}),Object.assign(z.prototype,{isMatrix3:!0,set:function(t,i,s,e,n,r,o,h,a){const u=this.elements;return u[0]=t,u[1]=e,u[2]=o,u[3]=i,u[4]=n,u[5]=h,u[6]=s,u[7]=r,u[8]=a,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){const i=this.elements,s=t.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],this},extractBasis:function(t,i,s){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){const s=t.elements,e=i.elements,n=this.elements,r=s[0],o=s[3],h=s[6],a=s[1],u=s[4],c=s[7],l=s[2],m=s[5],f=s[8],d=e[0],x=e[3],y=e[6],_=e[1],p=e[4],M=e[7],z=e[2],g=e[5],w=e[8];return n[0]=r*d+o*_+h*z,n[3]=r*x+o*p+h*g,n[6]=r*y+o*M+h*w,n[1]=a*d+u*_+c*z,n[4]=a*x+u*p+c*g,n[7]=a*y+u*M+c*w,n[2]=l*d+m*_+f*z,n[5]=l*x+m*p+f*g,n[8]=l*y+m*M+f*w,this},multiplyScalar:function(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},determinant:function(){const t=this.elements,i=t[0],s=t[1],e=t[2],n=t[3],r=t[4],o=t[5],h=t[6],a=t[7],u=t[8];return i*r*u-i*o*a-s*n*u+s*o*h+e*n*a-e*r*h},getInverse:function(t,i){void 0!==i&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const s=t.elements,e=this.elements,n=s[0],r=s[1],o=s[2],h=s[3],a=s[4],u=s[5],c=s[6],l=s[7],m=s[8],f=m*a-u*l,d=u*c-m*h,x=l*h-a*c,y=n*f+r*d+o*x;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);const _=1/y;return e[0]=f*_,e[1]=(o*l-m*r)*_,e[2]=(u*r-o*a)*_,e[3]=d*_,e[4]=(m*n-o*c)*_,e[5]=(o*h-u*n)*_,e[6]=x*_,e[7]=(r*c-l*n)*_,e[8]=(a*n-r*h)*_,this},transpose:function(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this},setUvTransform:function(t,i,s,e,n,r,o){const h=Math.cos(n),a=Math.sin(n);this.set(s*h,s*a,-s*(h*r+a*o)+r+t,-e*a,e*h,-e*(-a*r+h*o)+o+i,0,0,1)},scale:function(t,i){const s=this.elements;return s[0]*=t,s[3]*=t,s[6]*=t,s[1]*=i,s[4]*=i,s[7]*=i,this},rotate:function(t){const i=Math.cos(t),s=Math.sin(t),e=this.elements,n=e[0],r=e[3],o=e[6],h=e[1],a=e[4],u=e[7];return e[0]=i*n+s*h,e[3]=i*r+s*a,e[6]=i*o+s*u,e[1]=-s*n+i*h,e[4]=-s*r+i*a,e[7]=-s*o+i*u,this},translate:function(t,i){const s=this.elements;return s[0]+=t*s[2],s[3]+=t*s[5],s[6]+=t*s[8],s[1]+=i*s[2],s[4]+=i*s[5],s[7]+=i*s[8],this},equals:function(t){const i=this.elements,s=t.elements;for(let t=0;t<9;t++)if(i[t]!==s[t])return!1;return!0},fromArray:function(t,i){void 0===i&&(i=0);for(let s=0;s<9;s++)this.elements[s]=t[s+i];return this},toArray:function(t,i){void 0===t&&(t=[]),void 0===i&&(i=0);const s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t}});let g=0;const w=new o,b=new e,v=new d,C=new o,E=new o,k=new o,O=new e,A=new o(1,0,0),F=new o(0,1,0),S=new o(0,0,1),R={type:"added"},W={type:"removed"};function j(){Object.defineProperty(this,"id",{value:g++}),this.uuid=s.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=j.DefaultUp.clone();const t=new o,i=new p,n=new e,r=new o(1,1,1);i._onChange(function(){n.setFromEuler(i,!1)}),n._onChange(function(){i.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new d},normalMatrix:{value:new z}}),this.matrix=new d,this.matrixWorld=new d,this.matrixAutoUpdate=j.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new M,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}j.DefaultUp=new o(0,1,0),j.DefaultMatrixAutoUpdate=!0,j.prototype=Object.assign(Object.create(x.prototype),{constructor:j,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,i){this.quaternion.setFromAxisAngle(t,i)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,i){return b.setFromAxisAngle(t,i),this.quaternion.multiply(b),this},rotateOnWorldAxis:function(t,i){return b.setFromAxisAngle(t,i),this.quaternion.premultiply(b),this},rotateX:function(t){return this.rotateOnAxis(A,t)},rotateY:function(t){return this.rotateOnAxis(F,t)},rotateZ:function(t){return this.rotateOnAxis(S,t)},translateOnAxis:function(t,i){return w.copy(t).applyQuaternion(this.quaternion),this.position.add(w.multiplyScalar(i)),this},translateX:function(t){return this.translateOnAxis(A,t)},translateY:function(t){return this.translateOnAxis(F,t)},translateZ:function(t){return this.translateOnAxis(S,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(v.getInverse(this.matrixWorld))},lookAt:function(t,i,s){t.isVector3?C.copy(t):C.set(t,i,s);const e=this.parent;this.updateWorldMatrix(!0,!1),E.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?v.lookAt(E,C,this.up):v.lookAt(C,E,this.up),this.quaternion.setFromRotationMatrix(v),e&&(v.extractRotation(e.matrixWorld),b.setFromRotationMatrix(v),this.quaternion.premultiply(b.inverse()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(R)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(W)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),v.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),v.multiply(t.parent.matrixWorld)),t.applyMatrix4(v),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,i){if(this[t]===i)return this;for(let s=0,e=this.children.length;s<e;s++){const e=this.children[s].getObjectByProperty(t,i);if(void 0!==e)return e}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new o),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new e),this.updateMatrixWorld(!0),this.matrixWorld.decompose(E,t,k),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(E,O,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new o),this.updateMatrixWorld(!0);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const i=this.children;for(let s=0,e=i.length;s<e;s++)i[s].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const i=this.children;for(let s=0,e=i.length;s<e;s++)i[s].traverseVisible(t)},traverseAncestors:function(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let s=0,e=i.length;s<e;s++)i[s].updateMatrixWorld(t)},updateWorldMatrix:function(t,i){const s=this.parent;if(!0===t&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateWorldMatrix(!1,!0)}},toJSON:function(t){const i=void 0===t||"string"==typeof t,s={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const e={};function n(i,s){return void 0===i[s.uuid]&&(i[s.uuid]=s.toJSON(t)),s.uuid}if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),!0===this.castShadow&&(e.castShadow=!0),!0===this.receiveShadow&&(e.receiveShadow=!0),!1===this.visible&&(e.visible=!1),!1===this.frustumCulled&&(e.frustumCulled=!1),0!==this.renderOrder&&(e.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),e.layers=this.layers.mask,e.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(e.matrixAutoUpdate=!1),this.isInstancedMesh&&(e.type="InstancedMesh",e.count=this.count,e.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){e.geometry=n(t.geometries,this.geometry);const i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){const s=i.shapes;if(Array.isArray(s))for(let i=0,e=s.length;i<e;i++){const e=s[i];n(t.shapes,e)}else n(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){const i=[];for(let s=0,e=this.material.length;s<e;s++)i.push(n(t.materials,this.material[s]));e.material=i}else e.material=n(t.materials,this.material);if(this.children.length>0){e.children=[];for(let i=0;i<this.children.length;i++)e.children.push(this.children[i].toJSON(t).object)}if(i){const i=r(t.geometries),e=r(t.materials),n=r(t.textures),o=r(t.images),h=r(t.shapes);i.length>0&&(s.geometries=i),e.length>0&&(s.materials=e),n.length>0&&(s.textures=n),o.length>0&&(s.images=o),h.length>0&&(s.shapes=h)}return s.object=e,s;function r(t){const i=[];for(const s in t){const e=t[s];delete e.metadata,i.push(e)}return i}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,i){if(void 0===i&&(i=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let i=0;i<t.children.length;i++){const s=t.children[i];this.add(s.clone())}return this}});export{j as Object3D};
